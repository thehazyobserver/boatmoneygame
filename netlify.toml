[build]
  base = "frontend"
  publish = "dist"
  command = "npm run build"
  # Build when ANY repo files change (not just frontend/)
  # If there are no changes in the repo between cached and current commit, exit 0 to skip.
  # Otherwise, exit 1 to run the build.
  ignore = "git diff --quiet $CACHED_COMMIT_REF $COMMIT_REF || exit 1"

[build.environment]
  NODE_VERSION = "18"
  SECRETS_SCAN_ENABLED = "false"
  SECRETS_SCAN_OMIT_KEYS = "VITE_ALCHEMY_API_KEY"

[[redirects]]
  from = "/*"
  to = "/index.html"
  status = 200
